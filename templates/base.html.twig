{# base.html.twig #}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Mon Album Photo{% endblock %}</title>
    {{ encore_entry_link_tags('app-ts') }} <!-- Assure-toi que ceci charge les bons fichiers CSS/JS générés par Webpack -->
    <link rel="stylesheet" href="{{ asset('build/app.css') }}">
    <link rel="icon" href="{{ asset('images/favicon.png') }}" type="image/png">
    
    {% block head %}{% endblock %}
</head>
<body class="dark-background">
    <header class="header">
        <img src="{{ asset('images/logoGQ.png') }}" alt="logo GQ">
        <nav>
            <div class="menu">
                <a href="{{ path('portfolio_home') }}" class="{% if app.request.attributes.get('_route') == 'portfolio_home' %}active{% endif %}">Accueil</a>
                <div class="dropdown">
                    <a href="{{ path('photo_albums') }}" class="{% if app.request.attributes.get('_route') == 'photo_albums' %}active{% endif %}">Photos</a>
                    {% if is_granted('ROLE_ADMIN') %}
                        <div class="dropdown-content">
                            <a href="{{ path('album_new') }}">Créer un album</a>
                            <a href="{{ path('photo_upload') }}">Télécharger une photo</a>
                        </div>
                    {% endif %}
                </div>
                
                {% if app.user %}
                    <a href="{{ path('reference') }}" class="{% if app.request.attributes.get('_route') == 'reference' %}active{% endif %}">Références</a>
                {% endif %}

                <a href="{{ path('contact') }}" class="{% if app.request.attributes.get('_route') == 'contact' %}active{% endif %}">Contact</a>

                {% if app.user %}
                    <div class="dropdown">
                        <a href="#" 
                        class="{% if app.request.attributes.get('_route') == 'logout' %}active{% endif %}">
                            Bienvenue, {{ app.user.username }} !
                        </a>
                        <div class="dropdown-content">
                            {% if is_granted('ROLE_ADMIN') %}
                                <a href="{{ path('dashboard') }}">Dashboard</a>
                            {% endif %}
                            <a href="{{ path('logout') }}">Se déconnecter</a>
                        </div>
                    </div>
                {% else %}
                    <a href="{{ path('login') }}" 
                    class="{% if app.request.attributes.get('_route') == 'login' %}active{% endif %}">
                        Se connecter
                    </a>
                    <a href="{{ path('register') }}" 
                    class="{% if app.request.attributes.get('_route') == 'register' %}active{% endif %}">
                        S'inscrire
                    </a>
                {% endif %}

                <form method="get" action="{{ path('change_locale') }}">
                    <div class="custom-select">
                        <div class="selected-option">
                            {% if app.request.locale == 'fr' %}
                                <img src="{{ asset('images/fr.png') }}" alt="Français" class="flag-icon" />
                            {% else %}
                                <img src="{{ asset('images/gb.png') }}" alt="English" class="flag-icon" />
                            {% endif %}
                        </div>
                        <ul class="options">
                            {% if app.request.locale != 'fr' %}
                                <li>
                                    <a href="{{ path('change_locale', {'locale': 'fr'}) }}">
                                        <img src="{{ asset('images/fr.png') }}" alt="Français" class="flag-icon" />
                                    </a>
                                </li>
                            {% endif %}
                            {% if app.request.locale != 'en' %}
                                <li>
                                    <a href="{{ path('change_locale', {'locale': 'en'}) }}">
                                        <img src="{{ asset('images/gb.png') }}" alt="English" class="flag-icon" />
                                    </a>
                                </li>
                            {% endif %}
                        </ul>
                    </div>
                </form>
            </div>
        </nav>
    </header>

    <div class="main-content-wrapper">
        <div class="main-content">
            <main>
                {% block body %}{% endblock %}
            </main>
        </div>
    </div>

    <footer>
        <p>Copyright 2024 - Guillaume Quesnel</p>
        <div class="social-icons">
            <a href="https://www.instagram.com/globeinyourhand" target="_blank">
                <img src="{{ asset('images/logo_instagram.png') }}" alt="Instagram" class="social-icon">
            </a>
            <a href="https://www.linkedin.com/in/guillaume-quesnel-a567352aa/" target="_blank">
                <img src="{{ asset('images/logo_linkedin.png') }}" alt="LinkedIn" class="social-icon">
            </a>
            <a href="https://github.com/qguillaume" target="_blank">
                <img src="{{ asset('images/logo_github.png') }}" alt="GitHub" class="social-icon">
            </a>
        </div>
    </footer>

    {{ encore_entry_script_tags('app-ts') }} <!-- Chargement correct du fichier JavaScript via Webpack -->
    {% block javascripts %}{% endblock %}
</body>
</html>
