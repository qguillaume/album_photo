{% extends 'base.html.twig' %}

{% block title %}Détails de la photo{% endblock %}

{% block body %}
    <div class="center">
        <div class="polaroid-images">
            <a href="#">
                <img src="{{ asset('uploads/photos/' ~ photo.filePath) }}" alt="{{ photo.title }}" class="polaroid-thumbnail">
                <div class="photo-title">{{ photo.title }}</div>
            </a>
        </div>
    </div>

    <p class="details-photo"><strong>Nombre de likes : {{ photo.likesCount }}</strong><div id="like-button-container"></div></p><!-- @TODO isoler le bouton like et le faire fonctionner ici -->
        {% if photo.album %}
            <div class="center">
                <a href="{{ path('photos_by_album', {'id': photo.album.id}) }}" class="orange-button">Retour à l'album {{ photo.album.nomAlbum }}</a>
            </div>
        {% else %}
            <p class="details-photo">Sans album</p>
        {% endif %}
    
    
    <h2>{{"comments"|trans}}</h2>
    {% if comments|length > 0 %}
        <ul>
            {% for comment in comments %}
                <li>
                    <strong>{{ comment.user.username }}</strong> : {{ comment.content }}
                    <br>
                    <small>Posté le {{ comment.createdAt|date('d/m/Y H:i') }}</small>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <div class="center"><p>{{"no_comment"|trans}}</p></div>
    {% endif %}

    {% if app.user %}
        {{ form_start(commentForm) }}
            <div class="form-group">
                {{ form_widget(commentForm.content, {'attr': {'placeholder': 'leave_comment'}}) }}
            </div>
            <div class="form-group">
                {{ form_widget(commentForm.send, {'attr': {'class': 'green-button'}}) }}
            </div>
        {{ form_end(commentForm) }}
    {% else %}
        <div class="center"><a href="{{path('login')}}">{{"connected_to_comment"|trans}}</a></div>
    {% endif %}
{% endblock %}
