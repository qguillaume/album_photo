{% extends 'base.html.twig' %}

{% block body %}
<h2>{{ 'pictures_of_album'|trans }} {{ album.getNomAlbum() }}</h2>

{% for photo in photos %}
    {% if photo.isVisible and photo.isApproved %}
        <div class="card-container">
            <div class="card">
                <!-- Face avant -->
                <div class="card-front">
                    <img src="{{ asset('uploads/photos/' ~ photo.filePath) }}" alt="{{ photo.title }}" class="photo-thumbnail">
                </div>
                <!-- Face arri√®re -->
                <div class="card-back">
                    <div>
                        <p>{{ photo.title }}</p>
                        {% if is_granted('ROLE_USER') %}
                            <div class="photo-actions">
                                <div id="photo-controls-{{ photo.id }}" 
                                    data-photo-id="{{ photo.id }}" 
                                    data-photo-title="{{ photo.title }}" 
                                    data-photo-url="{{ asset('uploads/photos/' ~ photo.filePath) }}"
                                    data-initial-likes="{{ photo.likesCount }}"
                                    data-photo-path="{{ path('photo_show', { 'id': photo.id }) }}"
                                    data-is-owner="{{ is_owner }}">

                                    {% if not is_owner %}
                                        <button class="btn-like" onClick="handleLike({{ photo.id }})">
                                            ‚ù§Ô∏è {{ photo.likesCount }}
                                        </button>
                                    {% endif %}

                                    <a href="{{ path('photo_show', { 'id': photo.id }) }}" class="btn-view">üëÅÔ∏è Voir</a>
                                    
                                    {% if is_owner %}
                                        <button class="btn-rename" onClick="handleRename({{ photo.id }})">‚úèÔ∏è Renommer</button>
                                        <button class="btn-delete" onClick="handleDelete({{ photo.id }})">‚ùå Supprimer</button>
                                    {% endif %}
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
{% endfor %}

{% endblock %}

{% block javascripts %}
    {{ encore_entry_script_tags('app') }}
{% endblock %}
